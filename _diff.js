!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).Diff={})}(this,function(n){"use strict";var t,e=function(){function n(){}return n.prototype.diff=function(n,t,e){void 0===e&&(e={}),"function"==typeof e?(r=e,e={}):"callback"in e&&(r=e.callback);var r,o=this.castInput(n,e),i=this.castInput(t,e),u=this.removeEmpty(this.tokenize(o,e)),l=this.removeEmpty(this.tokenize(i,e));return this.diffWithOptionsObj(u,l,e,r)},n.prototype.diffWithOptionsObj=function(n,t,e,r){var o,i=this,u=function(n){if(n=i.postProcess(n,e),!r)return n;setTimeout(function(){r(n)},0)},l=t.length,a=n.length,s=1,f=l+a;null!=e.maxEditLength&&(f=Math.min(f,e.maxEditLength));var c=null!==(o=e.timeout)&&void 0!==o?o:1/0,p=Date.now()+c,h=[{oldPos:-1,lastComponent:void 0}],d=this.extractCommon(h[0],t,n,0,e);if(h[0].oldPos+1>=a&&d+1>=l)return u(this.buildValues(h[0].lastComponent,t,n));var v=-1/0,g=1/0,$=function(){for(var r=Math.max(v,-s);r<=Math.min(g,s);r+=2){var o=void 0,f=h[r-1],c=h[r+1];f&&(h[r-1]=void 0);var p=!1;if(c){var $=c.oldPos-r;p=c&&0<=$&&$<l}var y=f&&f.oldPos+1<a;if(!p&&!y){h[r]=void 0;continue}if(o=!y||p&&f.oldPos<c.oldPos?i.addToPath(c,!0,!1,0,e):i.addToPath(f,!1,!0,1,e),d=i.extractCommon(o,t,n,r,e),o.oldPos+1>=a&&d+1>=l)return u(i.buildValues(o.lastComponent,t,n))||!0;h[r]=o,o.oldPos+1>=a&&(g=Math.min(g,r-1)),d+1>=l&&(v=Math.max(v,r+1))}s++};if(r)!function n(){setTimeout(function(){if(s>f||Date.now()>p)return r(void 0);$()||n()},0)}();else for(;s<=f&&Date.now()<=p;){var y=$();if(y)return y}},n.prototype.addToPath=function(n,t,e,r,o){var i=n.lastComponent;return i&&!o.oneChangePerToken&&i.added===t&&i.removed===e?{oldPos:n.oldPos+r,lastComponent:{count:i.count+1,added:t,removed:e,previousComponent:i.previousComponent}}:{oldPos:n.oldPos+r,lastComponent:{count:1,added:t,removed:e,previousComponent:i}}},n.prototype.extractCommon=function(n,t,e,r,o){for(var i=t.length,u=e.length,l=n.oldPos,a=l-r,s=0;a+1<i&&l+1<u&&this.equals(e[l+1],t[a+1],o);)a++,l++,s++,o.oneChangePerToken&&(n.lastComponent={count:1,previousComponent:n.lastComponent,added:!1,removed:!1});return s&&!o.oneChangePerToken&&(n.lastComponent={count:s,previousComponent:n.lastComponent,added:!1,removed:!1}),n.oldPos=l,a},n.prototype.equals=function(n,t,e){return e.comparator?e.comparator(n,t):n===t||!!e.ignoreCase&&n.toLowerCase()===t.toLowerCase()},n.prototype.removeEmpty=function(n){for(var t=[],e=0;e<n.length;e++)n[e]&&t.push(n[e]);return t},n.prototype.castInput=function(n,t){return n},n.prototype.tokenize=function(n,t){return Array.from(n)},n.prototype.join=function(n){return n.join("")},n.prototype.postProcess=function(n,t){return n},Object.defineProperty(n.prototype,"useLongestToken",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.buildValues=function(n,t,e){for(var r,o=[];n;)o.push(n),r=n.previousComponent,delete n.previousComponent,n=r;o.reverse();for(var i=o.length,u=0,l=0,a=0;u<i;u++){var s=o[u];if(s.removed)s.value=this.join(e.slice(a,a+s.count)),a+=s.count;else{if(!s.added&&this.useLongestToken){var f=t.slice(l,l+s.count);f=f.map(function(n,t){var r=e[a+t];return r.length>n.length?r:n}),s.value=this.join(f)}else s.value=this.join(t.slice(l,l+s.count));l+=s.count,s.added||(a+=s.count)}}return o},n}(),r=(t=function(n,e){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,e)},function(n,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return r(t,n),t}(e));function i(n,t){var e;for(e=0;e<n.length&&e<t.length&&n[e]==t[e];e++);return n.slice(0,e)}function u(n,t){var e;if(!n||!t||n[n.length-1]!=t[t.length-1])return"";for(e=0;e<n.length&&e<t.length&&n[n.length-(e+1)]==t[t.length-(e+1)];e++);return n.slice(-e)}function l(n,t,e){if(n.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return e+n.slice(t.length)}function a(n,t,e){if(!t)return n+e;if(n.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return n.slice(0,-t.length)+e}function s(n,t){return l(n,t,"")}function f(n,t){return a(n,t,"")}function c(n,t){return t.slice(0,function n(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var o=e.length;t.length<e.length&&(o=t.length);var i=Array(o),u=0;i[0]=0;for(var l=1;l<o;l++){for(e[l]==e[u]?i[l]=i[u]:i[l]=u;u>0&&e[l]!=e[u];)u=i[u];e[l]==e[u]&&u++}u=0;for(var a=r;a<t.length;a++){for(;u>0&&t[a]!=e[u];)u=i[u];t[a]==e[u]&&u++}return u}(n,t))}function p(n){var t;for(t=n.length-1;t>=0&&n[t].match(/\s/);t--);return n.substring(t+1)}function h(n){var t=n.match(/^\s*/);return t?t[0]:""}var d,v=(d=function(n,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}d(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),g="a-zA-Z0-9_\\u{C0}-\\u{FF}u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",$=RegExp("[".concat(g,"]+|\\s+|[^").concat(g,"]"),"ug"),y=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return v(t,n),t.prototype.equals=function(n,t,e){return e.ignoreCase&&(n=n.toLowerCase(),t=t.toLowerCase()),n.trim()===t.trim()},t.prototype.tokenize=function(n,t){if(void 0===t&&(t={}),t.intlSegmenter){var e,r=t.intlSegmenter;if("word"!=r.resolvedOptions().granularity)throw Error('The segmenter passed must have a granularity of "word"');e=Array.from(r.segment(n),function(n){return n.segment})}else e=n.match($)||[];var o=[],i=null;return e.forEach(function(n){/\s/.test(n)?null==i?o.push(n):o.push(o.pop()+n):null!=i&&/\s/.test(i)?o[o.length-1]==i?o.push(o.pop()+n):o.push(i+n):o.push(n),i=n}),o},t.prototype.join=function(n){return n.map(function(n,t){return 0==t?n:n.replace(/^\s+/,"")}).join("")},t.prototype.postProcess=function(n,t){if(!n||t.oneChangePerToken)return n;var e=null,r=null,o=null;return n.forEach(function(n){n.added?r=n:n.removed?o=n:((r||o)&&_(e,o,r,n),e=n,r=null,o=null)}),(r||o)&&_(e,o,r,null),n},t}(e));function _(n,t,e,r){if(t&&e){var o=h(t.value),d=p(t.value),v=h(e.value),g=p(e.value);if(n){var $=i(o,v);n.value=a(n.value,v,$),t.value=s(t.value,$),e.value=s(e.value,$)}if(r){var y=u(d,g);r.value=l(r.value,g,y),t.value=f(t.value,y),e.value=f(e.value,y)}}else if(e){if(n){var _=h(e.value);e.value=e.value.substring(_.length)}if(r){var _=h(r.value);r.value=r.value.substring(_.length)}}else if(n&&r){var m=h(r.value),w=h(t.value),k=p(t.value),P=i(m,w);t.value=s(t.value,P);var C=u(s(m,P),k);t.value=f(t.value,C),r.value=l(r.value,m,C),n.value=a(n.value,m,m.slice(0,m.length-C.length))}else if(r){var L=h(r.value),b=p(t.value),W=c(b,L);t.value=f(t.value,W)}else if(n){var x=p(n.value),O=h(t.value),W=c(x,O);t.value=s(t.value,W)}}var m=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return v(t,n),t.prototype.tokenize=function(n){var t=RegExp("(\\r?\\n)|[".concat(g,"]+|[^\\S\\n\\r]+|[^").concat(g,"]"),"ug");return n.match(t)||[]},t}(e));function w(n,t,e){return m.diff(n,t,e)}var k,P=(k=function(n,t){return(k=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}k(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),C=new(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.tokenize=b,t}return P(t,n),t.prototype.equals=function(t,e,r){return r.ignoreWhitespace?(r.newlineIsToken&&t.includes("\n")||(t=t.trim()),r.newlineIsToken&&e.includes("\n")||(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith("\n")&&(t=t.slice(0,-1)),e.endsWith("\n")&&(e=e.slice(0,-1))),n.prototype.equals.call(this,t,e,r)},t}(e));function L(n,t,e){return C.diff(n,t,e)}function b(n,t){t.stripTrailingCr&&(n=n.replace(/\r\n/g,"\n"));var e=[],r=n.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var i=r[o];o%2&&!t.newlineIsToken?e[e.length-1]+=i:e.push(i)}return e}var W,x,O,F=(W=function(n,t){return(W=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}W(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),S=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return F(t,n),t.prototype.tokenize=function(n){return n.split(/(?<=[.!?])(\s+|$)/)},t}(e)),T=(x=function(n,t){return(x=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}x(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),j=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)},t}(e)),N=(O=function(n,t){return(O=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}O(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),z=new(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.tokenize=b,t}return N(t,n),Object.defineProperty(t.prototype,"useLongestToken",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.castInput=function(n,t){var e=t.undefinedReplacement,r=t.stringifyReplacer;return"string"==typeof n?n:JSON.stringify(I(n,null,null,void 0===r?function(n,t){return void 0===t?e:t}:r),null,"  ")},t.prototype.equals=function(t,e,r){return n.prototype.equals.call(this,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)},t}(e));function I(n,t,e,r,o){for(t=t||[],e=e||[],r&&(n=r(void 0===o?"":o,n)),i=0;i<t.length;i+=1)if(t[i]===n)return e[i];if("[object Array]"===Object.prototype.toString.call(n)){for(t.push(n),u=Array(n.length),e.push(u),i=0;i<n.length;i+=1)u[i]=I(n[i],t,e,r,String(i));return t.pop(),e.pop(),u}if(n&&n.toJSON&&(n=n.toJSON()),"object"==typeof n&&null!==n){t.push(n),u={},e.push(u);var i,u,l,a=[];for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&a.push(l);for(a.sort(),i=0;i<a.length;i+=1)u[l=a[i]]=I(n[l],t,e,r,l);t.pop(),e.pop()}else u=n;return u}var D,E=(D=function(n,t){return(D=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}D(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),H=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return E(t,n),t.prototype.tokenize=function(n){return n.slice()},t.prototype.join=function(n){return n},t.prototype.removeEmpty=function(n){return n},t}(e)),A=function(){return(A=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function q(n){var t=n.split(/\n/),e=[],r=0;function o(){var n={};for(e.push(n);r<t.length;){var o=t[r];if(/^(---|\+\+\+|@@)\s/.test(o))break;var l=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(o);l&&(n.index=l[1]),r++}for(i(n),i(n),n.hunks=[];r<t.length;){var o=t[r];if(/^(Index:\s|diff\s|---\s|\+\+\+\s|===================================================================)/.test(o))break;if(/^@@/.test(o))n.hunks.push(u());else if(o)throw Error("Unknown line "+(r+1)+" "+JSON.stringify(o));else r++}}function i(n){var e=/^(---|\+\+\+)\s+(.*)\r?$/.exec(t[r]);if(e){var o=e[2].split("	",2),i=(o[1]||"").trim(),u=o[0].replace(/\\\\/g,"\\");/^".*"$/.test(u)&&(u=u.substr(1,u.length-2)),"---"===e[1]?(n.oldFileName=u,n.oldHeader=i):(n.newFileName=u,n.newHeader=i),r++}}function u(){var n,e=r,o=t[r++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),i={oldStart:+o[1],oldLines:void 0===o[2]?1:+o[2],newStart:+o[3],newLines:void 0===o[4]?1:+o[4],lines:[]};0===i.oldLines&&(i.oldStart+=1),0===i.newLines&&(i.newStart+=1);for(var u=0,l=0;r<t.length&&(l<i.oldLines||u<i.newLines||(null===(n=t[r])||void 0===n?void 0:n.startsWith("\\")));r++){var a=0==t[r].length&&r!=t.length-1?" ":t[r][0];if("+"===a||"-"===a||" "===a||"\\"===a)i.lines.push(t[r]),"+"===a?u++:"-"===a?l++:" "===a&&(u++,l++);else throw Error("Hunk at line ".concat(e+1," contained invalid line ").concat(t[r]))}if(u||1!==i.newLines||(i.newLines=0),l||1!==i.oldLines||(i.oldLines=0),u!==i.newLines)throw Error("Added line count did not match for hunk at line "+(e+1));if(l!==i.oldLines)throw Error("Removed line count did not match for hunk at line "+(e+1));return i}for(;r<t.length;)o();return e}function J(n,t,e){var r=!0,o=!1,i=!1,u=1;return function l(){if(r&&!i){if(o?u++:r=!1,n+u<=e)return n+u;i=!0}if(!o)return(i||(r=!0),t<=n-u)?n-u++:(o=!0,l())}}function R(n,t,e){var r;if(void 0===e&&(e={}),(r="string"==typeof t?q(t):Array.isArray(t)?t:[t]).length>1)throw Error("applyPatch only works with a single input.");return function n(t,e,r){if(void 0===r&&(r={}),r.autoConvertLineEndings||null==r.autoConvertLineEndings){var o,i,u,l;!(o=t).includes("\r\n")||o.startsWith("\n")||o.match(/[^\r]\n/)||(Array.isArray(i=e)||(i=[i]),i.some(function(n){return n.hunks.some(function(n){return n.lines.some(function(n){return!n.startsWith("\\")&&n.endsWith("\r")})})}))?!(u=t).includes("\r\n")&&u.includes("\n")&&(Array.isArray(l=e)||(l=[l]),l.some(function(n){return n.hunks.some(function(n){return n.lines.some(function(n){return n.endsWith("\r")})})})&&l.every(function(n){return n.hunks.every(function(n){return n.lines.every(function(t,e){var r;return t.startsWith("\\")||t.endsWith("\r")||(null===(r=n.lines[e+1])||void 0===r?void 0:r.startsWith("\\"))})})}))&&(e=function n(t){return Array.isArray(t)?t.map(function(t){return n(t)}):A(A({},t),{hunks:t.hunks.map(function(n){return A(A({},n),{lines:n.lines.map(function(n){return n.endsWith("\r")?n.substring(0,n.length-1):n})})})})}(e)):e=function n(t){return Array.isArray(t)?t.map(function(t){return n(t)}):A(A({},t),{hunks:t.hunks.map(function(n){return A(A({},n),{lines:n.lines.map(function(t,e){var r;return t.startsWith("\\")||t.endsWith("\r")||(null===(r=n.lines[e+1])||void 0===r?void 0:r.startsWith("\\"))?t:t+"\r"})})})})}(e)}var a=t.split("\n"),s=e.hunks,f=r.compareLine||function(n,t,e,r){return t===r},c=r.fuzzFactor||0,p=0;if(c<0||!Number.isInteger(c))throw Error("fuzzFactor must be a non-negative integer");if(!s.length)return t;for(var h="",d=!1,v=!1,g=0;g<s[s.length-1].lines.length;g++){var $=s[s.length-1].lines[g];"\\"==$[0]&&("+"==h[0]?d=!0:"-"==h[0]&&(v=!0)),h=$}if(d){if(v){if(!c&&""==a[a.length-1])return!1}else if(""==a[a.length-1])a.pop();else if(!c)return!1}else if(v){if(""!=a[a.length-1])a.push("");else if(!c)return!1}function y(n,t,e,r,o,i,u){void 0===r&&(r=0),void 0===o&&(o=!0),void 0===i&&(i=[]),void 0===u&&(u=0);for(var l=0,s=!1;r<n.length;r++){var c=n[r],p=c.length>0?c[0]:" ",h=c.length>0?c.substr(1):c;if("-"===p){if(f(t+1,a[t],p,h))t++,l=0;else{if(!e||null==a[t])return null;return i[u]=a[t],y(n,t+1,e-1,r,!1,i,u+1)}}if("+"===p){if(!o)return null;i[u]=h,u++,l=0,s=!0}if(" "===p){if(l++,i[u]=a[t],f(t+1,a[t],p,h))u++,o=!0,s=!1,t++;else{if(s||!e)return null;return a[t]&&(y(n,t+1,e-1,r+1,!1,i,u+1)||y(n,t+1,e-1,r,!1,i,u+1))||y(n,t,e-1,r+1,!1,i,u)}}}return u-=l,t-=l,i.length=u,{patchedLines:i,oldLineLastI:t-1}}for(var _=[],m=0,g=0;g<s.length;g++){for(var w=s[g],k=void 0,P=a.length-w.oldLines+c,C=void 0,L=0;L<=c;L++){for(var b=J(C=w.oldStart+m-1,p,P);void 0!==C&&!(k=y(w.lines,C,L));C=b());if(k)break}if(!k)return!1;for(var W=p;W<C;W++)_.push(a[W]);for(var x=0;x<k.patchedLines.length;x++){var $=k.patchedLines[x];_.push($)}p=k.oldLineLastI+1,m=C+1-w.oldStart}for(var g=p;g<a.length;g++)_.push(a[g]);return _.join("\n")}(n,r[0],e)}var V=function(){return(V=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},M=function(){return(M=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function U(n,t,e,r,o,i,u){void 0===(l=u?"function"==typeof u?{callback:u}:u:{}).context&&(l.context=4);var l,a=l.context;if(l.newlineIsToken)throw Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(!l.callback)return f(L(e,r,l));var s=l.callback;function f(e){if(e){e.push({value:"",lines:[]});for(var r=[],u=0,l=0,s=[],f=1,c=1,p=0;p<e.length;p++){var h=e[p],d=h.lines||B(h.value);if(h.lines=d,h.added||h.removed){if(!u){var v=e[p-1];u=f,l=c,v&&(u-=(s=a>0?W(v.lines.slice(-a)):[]).length,l-=s.length)}for(var g=0,$=d;g<$.length;g++){var y=$[g];s.push((h.added?"+":"-")+y)}h.added?c+=d.length:f+=d.length}else{if(u){if(d.length<=2*a&&p<e.length-2)for(var _=0,m=W(d);_<m.length;_++){var y=m[_];s.push(y)}else{for(var w=Math.min(d.length,a),k=0,P=W(d.slice(0,w));k<P.length;k++){var y=P[k];s.push(y)}var C={oldStart:u,oldLines:f-u+w,newStart:l,newLines:c-l+w,lines:s};r.push(C),u=0,l=0,s=[]}}f+=d.length,c+=d.length}}for(var L=0,b=r;L<b.length;L++)for(var C=b[L],p=0;p<C.lines.length;p++)C.lines[p].endsWith("\n")?C.lines[p]=C.lines[p].slice(0,-1):(C.lines.splice(p+1,0,"\\ No newline at end of file"),p++);return{oldFileName:n,newFileName:t,oldHeader:o,newHeader:i,hunks:r}}function W(n){return n.map(function(n){return" "+n})}}L(e,r,M(M({},l),{callback:function(n){s(f(n))}}))}function X(n){if(Array.isArray(n))return n.map(X).join("\n");var t=[];n.oldFileName==n.newFileName&&t.push("Index: "+n.oldFileName),t.push("==================================================================="),t.push("--- "+n.oldFileName+(void 0===n.oldHeader?"":"	"+n.oldHeader)),t.push("+++ "+n.newFileName+(void 0===n.newHeader?"":"	"+n.newHeader));for(var e=0;e<n.hunks.length;e++){var r=n.hunks[e];0===r.oldLines&&(r.oldStart-=1),0===r.newLines&&(r.newStart-=1),t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@");for(var o=0,i=r.lines;o<i.length;o++){var u=i[o];t.push(u)}}return t.join("\n")+"\n"}function Z(n,t,e,r,o,i,u){if("function"==typeof u&&(u={callback:u}),null==u?void 0:u.callback){var l=u.callback;U(n,t,e,r,o,i,M(M({},u),{callback:function(n){n?l(X(n)):l(void 0)}}))}else{var a=U(n,t,e,r,o,i,u);if(!a)return;return X(a)}}function B(n){var t=n.endsWith("\n"),e=n.split("\n").map(function(n){return n+"\n"});return t?e.pop():e.push(e.pop().slice(0,-1)),e}function G(n){var t=n;return(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}n.Diff=e,n.applyPatch=R,n.applyPatches=function n(t,e){var r="string"==typeof t?q(t):t,o=0;!function n(){var t=r[o++];if(!t)return e.complete();e.loadFile(t,function(r,o){if(r)return e.complete(r);var i=R(o,t,e);e.patched(t,i,function(t){if(t)return e.complete(t);n()})})}()},n.arrayDiff=H,n.canonicalize=I,n.characterDiff=o,n.convertChangesToDMP=function n(t){for(var e,r,o=[],i=0;i<t.length;i++)r=(e=t[i]).added?1:e.removed?-1:0,o.push([r,e.value]);return o},n.convertChangesToXML=function n(t){for(var e=[],r=0;r<t.length;r++){var o=t[r];o.added?e.push("<ins>"):o.removed&&e.push("<del>"),e.push(G(o.value)),o.added?e.push("</ins>"):o.removed&&e.push("</del>")}return e.join("")},n.createPatch=function n(t,e,r,o,i,u){return Z(t,t,e,r,o,i,u)},n.createTwoFilesPatch=Z,n.cssDiff=j,n.diffArrays=function n(t,e,r){return H.diff(t,e,r)},n.diffChars=function n(t,e,r){return o.diff(t,e,r)},n.diffCss=function n(t,e,r){return j.diff(t,e,r)},n.diffJson=function n(t,e,r){return z.diff(t,e,r)},n.diffLines=L,n.diffSentences=function n(t,e,r){return S.diff(t,e,r)},n.diffTrimmedLines=function n(t,e,r){return r=function n(t,e){if("function"==typeof t)e.callback=t;else if(t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}(r,{ignoreWhitespace:!0}),C.diff(t,e,r)},n.diffWords=function n(t,e,r){return(null==r?void 0:r.ignoreWhitespace)==null||r.ignoreWhitespace?y.diff(t,e,r):w(t,e,r)},n.diffWordsWithSpace=w,n.formatPatch=X,n.jsonDiff=z,n.lineDiff=C,n.parsePatch=q,n.reversePatch=function n(t){return Array.isArray(t)?t.map(function(t){return n(t)}).reverse():V(V({},t),{oldFileName:t.newFileName,oldHeader:t.newHeader,newFileName:t.oldFileName,newHeader:t.oldHeader,hunks:t.hunks.map(function(n){return{oldLines:n.newLines,oldStart:n.newStart,newLines:n.oldLines,newStart:n.oldStart,lines:n.lines.map(function(n){return n.startsWith("-")?"+".concat(n.slice(1)):n.startsWith("+")?"-".concat(n.slice(1)):n})}})})},n.sentenceDiff=S,n.structuredPatch=U,n.wordDiff=y,n.wordsWithSpaceDiff=m});